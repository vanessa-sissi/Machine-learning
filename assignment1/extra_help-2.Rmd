---
title: "Things that might be useful for Assignment 1"
author: "Daniel Simpson"
date: "27/10/2020"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Colours and labels!

One of the things that you will need to do to plot your pattern is automatically
change the colours of the plot and to set the labels appropriately.

As with all things `ggplot2`, ways to do this can be found with enough time on
Google. But for reference, here are some commands that might help.

```{r, message=FALSE}
library(tidyverse)
data(mtcars)

## The manual way
mtcars %>% ggplot(aes(mpg, hp)) + geom_point(aes(col = factor(cyl),
                                                 shape = factor(gear))) +
  scale_colour_manual(values = c("4" = "red", "6" = "green", "8" = "blue"),
                      label = c("4" = "Four", "6" = "Six", "8" = "Eight"))

## The programatic way: using deframe
cyl_frame <- tibble(cyl = c(4,6,8), name = c("Four", "Six", "Eight"), 
                    col = c("red", "green", "blue"))

mtcars %>% ggplot(aes(mpg, hp)) + geom_point(aes(col = factor(cyl), 
                                                 shape = factor(gear))) +
  scale_colour_manual(values = cyl_frame %>% select(cyl, col) %>% deframe,
                      label =  cyl_frame %>% select(cyl, name) %>% deframe)

```

There is still a lot more fiddling to do to make it nice for the assignemnet,
but this is the main thing that you may not have seen.

## Getting a colour strip

I had foolishly assumed that `scales::show_col`` returned a ggplot object.
It does not!

So here is a way to do it.  There are probably much more elegeant ways to make
make it work. If you look at the vignette for `plot_grid`, which can be found
[on the cowgrid webpage](https://wilkelab.org/cowplot/articles/plot_grid.html)
you will see how to combine multiple strips.

You might have to fiddle a bit with the text size to make it work.

**Update:** I did it two ways. The second way is probably better, but I'll keep the 
first one for completeness (and because who doesn't love weird R code solutions).

```{r}
library(dplyr)
library(ggplot2)
library(cowplot)
square <- function(x, label_size) { 
  ggplot()  + 
    coord_fixed(xlim=c(0,1), ylim = c(0,1)) + theme_void() + 
    theme(plot.background = element_rect(fill = x)) + 
    geom_text(aes(0.5,0.5),label = x , size = label_size)
}
t <- tibble(colours = viridis::magma(2),
       squares = purrr::map(colours, ~ square(.x, 24/length(colours))))
plot_grid(plotlist = t$squares)
```

```{r}
n_col = length(t$colours)
rect_dat <- tibble(x1 = c(0:(n_col-1)), x2 = c(1:n_col), y1 = rep(0,n_col),
                   y2 =rep(1,n_col), colour = t$colours)
rect_dat %>% ggplot() + coord_fixed() + 
  geom_rect(aes(xmin=x1, xmax=x2, ymin=y1, ymax=y2, fill=colour), color="black") +
geom_text(aes(x=x1+(x2-x1)/2, y=y1+(y2-y1)/2, label=colour), size=24/n_col) + 
  scale_fill_manual(values = rect_dat$colour)+ theme_void() + theme(legend.position = "none") 
                   
```
